{% block head %}
{% endblock head %}
{% block content %}
    <head>
        {{ codemirror.include_codemirror() }}
        <script src="/static/vendor/codemirror/js/codemirror.js"></script>
        <link rel="stylesheet" href="/static/vendor/codemirror/css/codemirror.css">
        <script src="/static/vendor/codemirror/js/css-hint.js"></script>
        <script src="/static/vendor/codemirror/js/show-hint.js"></script>
        <script src="/static/Patterns/MediatorForEditor/AddCheckbox.js"></script>
        <script src="/static/Patterns/MediatorForEditor/Mediator.js"></script>
        <script src="/static/Patterns/MediatorForEditor/AddInptsTextArea.js"></script>
        <script src="/static/Patterns/MediatorForEditor/AddEditor.js"></script>
        <script src="/static/Patterns/MediatorForEditor/AddDropdown.js"></script>
        <link rel="stylesheet" href="/static/vendor/codemirror/css/show-hint.css">


        {
    </head>
    <body>
    {% include 'layout.html' %}
    {% from "includes/_formhelpers.html" import render_field %}
    <h1 class="lead" align="center"><font size="10px">Code and Compile</font></h1>
    <br>
    <br>

    <div class="container">
        <form method="POST" action="">
            <div>
                <select id="languages" name=languages method="GET" action="">
                    {% for language in languages %}
                        <option value="{{ language }}" SELECTED>{{ language }}</option>"
                    {% endfor %}
                </select>
            </div>
            <script src="/static/vendor/codemirror/js/codemirror.js"></script>
            <link rel="stylesheet" href="/static/vendor/codemirror/css/codemirror.css">
            <script src="/static/vendor/codemirror/js/python.js"></script>
            <link rel="stylesheet" href="/static/vendor/codemirror/css/base16-light.css">
            <script src="/static/vendor/codemirror/js/placeholder.js"></script>
            <script src="/static/vendor/codemirror/js/anyword-hint.js"></script>
            <script src="/static/vendor/codemirror/js/show-hint.js"></script>
            <link rel="stylesheet" href="/static/vendor/codemirror/css/show-hint.css">

            <div class="form-group">


                <label for="source_code"></label>
                <textarea class="form_control" id="flask-codemirror-source_code" name="source_code"></textarea>

            </div>

            <p>
                <input type="submit" class="btn btn-primary" name="run" value="Run"/>
                <input type="submit" class="btn btn-primary" name="submit" value="Submit"/>
                <input type="checkbox" class="checkbox-inline" id="custom_input" name="custom_input"
                       value="custom inputs"/>
                <label for="custom_input">Custom Inputs</label>

            </p>
            <div class="form-group">
                {{ render_field(form.inputs, class_="form-control",id="inputs") }}
            </div>
            <table class="table table-striped table-hover table-bordered" id="mydata">
                <p><font size="12"> <b><i> {{ status }}</i></b></font></p>

                <hr>
                <thead>
                <tr>
                    <th></th>
                </tr>
                </thead>
                <tfoot>
                <tr></tr>
                </tfoot>
                {% for output in outputs %}
                    <tr>
                        <td>
                            <p> {{ output }} </p>
                        </td>
                    </tr>
                {% endfor %}
            </table>
            <table class="table table-striped table-hover table-bordered" id="data">


                <hr>
                <thead>
                <tr>
                    <th></th>
                </tr>
                </thead>
                <tfoot>
                <tr></tr>
                </tfoot>
                <tr>
                    <td>
                        <p><a href="/submissions">{{ check_submissions }}</a></p>
                    </td>
                </tr>
            </table>


        </form>
    </div>
    <script>
        var mediator;
        mediator = new Mediator();
        checkbox = new AddCheckbox(mediator, "custom_input").checkbox;
        inputTextArea = new AddInputsTextArea(mediator, "inputs").inputTextArea;
        editor_for_source_code = new AddEditor(mediator, "flask-codemirror-source_code", {
                "extraKeys": {
                    "Ctrl-Space": "autocomplete",

                },
                "mode": "python",
                "theme": "base16-dark",
                "value": "function myScript(){return 100;}\n",
                "lineNumbers": "true",
                "fixedGutter": "true",
                "gutter": "true",
                "gutters": ["CodeMirror-lint-markers"],
                "lint": {
                    "globalstrict": "true",
                    "strict": "false"
                },
                "matchBrackets": "true"
            }
        ).editor;
        dropDown = new AddDropdown(mediator, "languages").select;
        mediator.init();


    </script>

    </body>

{% endblock content %}
